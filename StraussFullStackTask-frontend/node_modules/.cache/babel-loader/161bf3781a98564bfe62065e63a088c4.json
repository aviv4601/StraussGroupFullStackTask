{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\StraussExercise\\\\StraussFullStackTask-frontend\\\\src\\\\components\\\\Singup\\\\SignupForm.js\";\nimport React, { useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/authContext\";\nimport UsernameInput from \"../UI/Inputs/UsernameInput\";\nimport PasswordInput from \"../UI/Inputs/PasswordInput\";\nimport EmailInput from \"../UI/Inputs/EmailInput\";\nimport { signUpService } from \"../../api/apiServices\";\nimport classes from \"./SignupForm.module.css\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\nconst SignupForm = () => {\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const usernameRef = useRef(null);\n  const passwordRef = useRef(null);\n  const emailRef = useRef(null);\n  const [validUsername, setValidUsername] = useState(true);\n  const [validPassword, setValidPassword] = useState(true);\n  const [validEmail, setValidEmail] = useState(true);\n  const [usernameAlreadyExists, setUsernameAlreadyExists] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const submitHandler = async event => {\n    event.preventDefault();\n    const enteredUsername = usernameRef.current.value;\n    const enteredPassword = passwordRef.current.value;\n    const enteredEmail = emailRef.current.value;\n    setValidUsername(true);\n    setValidPassword(true);\n    setValidEmail(true);\n    setUsernameAlreadyExists(false);\n    console.log(\"enteredUsername, enteredPassword, enteredEmail\", enteredUsername, enteredPassword, enteredEmail);\n\n    if (enteredUsername.trim() === \"\") {\n      setValidUsername(false);\n      setErrorMessage(\"Username is required\");\n      return;\n    }\n\n    if (enteredPassword.trim() === \"\") {\n      setValidPassword(false);\n      setErrorMessage(\"Password is required\");\n      return;\n    }\n\n    if (enteredEmail.trim() === \"\") {\n      setValidEmail(false);\n      setErrorMessage(\"Email is required\");\n      return;\n    }\n\n    if (enteredUsername && enteredPassword && enteredEmail) {\n      const res = await signUpService(enteredUsername, enteredPassword, enteredEmail);\n      console.log(\"res\", res);\n\n      if (res && res.success === false) {\n        setUsernameAlreadyExists(true);\n        setErrorMessage(res.msg);\n        toast.error(res.msg);\n        return;\n      }\n\n      toast.success(\"Signed up successfully\");\n      login(res.token);\n      setTimeout(() => {\n        navigate(\"/candidates\"); // the timer is used here to slow down the main thread and let the toast message to be shown\n      }, 1500);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"Sign up\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    className: classes.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UsernameInput, {\n    usernameRef: usernameRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }), usernameAlreadyExists && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes[\"invalid-input\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Username already taken\"), !validUsername && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes[\"invalid-input\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Please enter a valid username\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PasswordInput, {\n    passwordRef: passwordRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }), !validPassword && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes[\"invalid-input\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Please enter a valid password\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(EmailInput, {\n    emailRef: emailRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }), !validEmail && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes[\"invalid-input\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Please enter a valid email\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: submitHandler,\n    className: classes[\"form-btn\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Sign up\"), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default SignupForm;","map":{"version":3,"sources":["D:/Projects/StraussExercise/StraussFullStackTask-frontend/src/components/Singup/SignupForm.js"],"names":["React","useRef","useState","useNavigate","useAuth","UsernameInput","PasswordInput","EmailInput","signUpService","classes","toast","Toaster","SignupForm","login","navigate","usernameRef","passwordRef","emailRef","validUsername","setValidUsername","validPassword","setValidPassword","validEmail","setValidEmail","usernameAlreadyExists","setUsernameAlreadyExists","errorMessage","setErrorMessage","submitHandler","event","preventDefault","enteredUsername","current","value","enteredPassword","enteredEmail","console","log","trim","res","success","msg","error","token","setTimeout","form"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/authContext\";\nimport UsernameInput from \"../UI/Inputs/UsernameInput\";\nimport PasswordInput from \"../UI/Inputs/PasswordInput\";\nimport EmailInput from \"../UI/Inputs/EmailInput\";\nimport { signUpService } from \"../../api/apiServices\";\nimport classes from \"./SignupForm.module.css\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\nconst SignupForm = () => {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const usernameRef = useRef(null);\n  const passwordRef = useRef(null);\n  const emailRef = useRef(null);\n  const [validUsername, setValidUsername] = useState(true);\n  const [validPassword, setValidPassword] = useState(true);\n  const [validEmail, setValidEmail] = useState(true);\n  const [usernameAlreadyExists, setUsernameAlreadyExists] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n    const enteredUsername = usernameRef.current.value;\n    const enteredPassword = passwordRef.current.value;\n    const enteredEmail = emailRef.current.value;\n    setValidUsername(true);\n    setValidPassword(true);\n    setValidEmail(true);\n    setUsernameAlreadyExists(false);\n    console.log(\n      \"enteredUsername, enteredPassword, enteredEmail\",\n      enteredUsername,\n      enteredPassword,\n      enteredEmail\n    );\n    if (enteredUsername.trim() === \"\") {\n      setValidUsername(false);\n      setErrorMessage(\"Username is required\");\n      return;\n    }\n    if (enteredPassword.trim() === \"\") {\n      setValidPassword(false);\n      setErrorMessage(\"Password is required\");\n      return;\n    }\n    if (enteredEmail.trim() === \"\") {\n      setValidEmail(false);\n      setErrorMessage(\"Email is required\");\n      return;\n    }\n    if (enteredUsername && enteredPassword && enteredEmail) {\n      const res = await signUpService(\n        enteredUsername,\n        enteredPassword,\n        enteredEmail\n      );\n      console.log(\"res\", res);\n      if (res && res.success === false) {\n        setUsernameAlreadyExists(true);\n        setErrorMessage(res.msg);\n        toast.error(res.msg);\n        return;\n      }\n      toast.success(\"Signed up successfully\");\n      login(res.token);\n      setTimeout(() => {\n        navigate(\"/candidates\"); // the timer is used here to slow down the main thread and let the toast message to be shown\n      }, 1500);\n    }\n  };\n\n  return (\n    <div>\n      <h3>Sign up</h3>\n      <form onSubmit={submitHandler} className={classes.form}>\n        <span>\n          <UsernameInput usernameRef={usernameRef} />\n          {usernameAlreadyExists && (\n            <p className={classes[\"invalid-input\"]}>Username already taken</p>\n          )}\n          {!validUsername && (\n            <p className={classes[\"invalid-input\"]}>\n              Please enter a valid username\n            </p>\n          )}\n        </span>\n        <span>\n          <PasswordInput passwordRef={passwordRef} />\n          {!validPassword && (\n            <p className={classes[\"invalid-input\"]}>\n              Please enter a valid password\n            </p>\n          )}\n        </span>\n        <span>\n          <EmailInput emailRef={emailRef} />\n          {!validEmail && (\n            <p className={classes[\"invalid-input\"]}>\n              Please enter a valid email\n            </p>\n          )}\n        </span>\n        <button\n          type=\"submit\"\n          onClick={submitHandler}\n          className={classes[\"form-btn\"]}\n        >\n          Sign up\n        </button>\n        <Toaster />\n      </form>\n    </div>\n  );\n};\n\nexport default SignupForm;\n"]},"metadata":{},"sourceType":"module"}
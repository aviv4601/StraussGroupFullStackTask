{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\StraussExercise\\\\StraussFullStackTask-frontend\\\\src\\\\components\\\\Signin\\\\SigninForm.js\";\nimport React, { useRef, useState } from \"react\";\nimport classes from \"./SigninForm.module.css\";\nimport { signInService } from \"../../api/apiServices\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/authContext\";\nimport UsernameInput from \"../UI/Inputs/UsernameInput\";\nimport PasswordInput from \"../UI/Inputs/PasswordInput\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\nconst SigninForm = () => {\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n  const [isWrongPassword, setIsWrongPassword] = useState(false);\n  const [isExistUsername, setIsExistUsername] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const submitHandler = async event => {\n    event.preventDefault();\n    const enteredUsername = usernameRef.current.value;\n    const enteredPassword = passwordRef.current.value;\n    setIsExistUsername(true);\n    setIsWrongPassword(false);\n\n    if (enteredUsername.trim() === \"\") {\n      setIsExistUsername(false);\n      return;\n    }\n\n    if (enteredPassword.trim() === \"\") {\n      setIsWrongPassword(true);\n      return;\n    }\n\n    console.log(enteredUsername, enteredPassword);\n\n    if (isExistUsername && !isWrongPassword) {\n      const res = await signInService(enteredUsername, enteredPassword);\n      console.log(\"res\", res);\n\n      if (res && res.success === false && res.msg === \"Username not exists\") {\n        setIsExistUsername(false);\n        setErrorMessage(res.msg);\n        toast.error(res.msg);\n        return;\n      }\n\n      if (res && res.success === false && res.msg === \"Password not match\") {\n        setIsWrongPassword(true);\n        setErrorMessage(res.msg);\n        toast.error(res.msg);\n        return;\n      }\n\n      toast.success(\"Sign in successfully\");\n      login(res.token);\n      setTimeout(() => {\n        navigate(\"/candidates\"); // the timer is used here to slow down the main thread and let the toast message to be shown\n      }, 1500);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UsernameInput, {\n    usernameRef: usernameRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }), !isExistUsername && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes[\"invalid-input\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, errorMessage), /*#__PURE__*/React.createElement(PasswordInput, {\n    passwordRef: passwordRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }), isWrongPassword && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes[\"invalid-input\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, errorMessage), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: classes[\"form-btn\"],\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default SigninForm;","map":{"version":3,"sources":["D:/Projects/StraussExercise/StraussFullStackTask-frontend/src/components/Signin/SigninForm.js"],"names":["React","useRef","useState","classes","signInService","useNavigate","useAuth","UsernameInput","PasswordInput","toast","Toaster","SigninForm","login","navigate","usernameRef","passwordRef","isWrongPassword","setIsWrongPassword","isExistUsername","setIsExistUsername","errorMessage","setErrorMessage","submitHandler","event","preventDefault","enteredUsername","current","value","enteredPassword","trim","console","log","res","success","msg","error","token","setTimeout","form"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport classes from \"./SigninForm.module.css\";\nimport { signInService } from \"../../api/apiServices\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/authContext\";\nimport UsernameInput from \"../UI/Inputs/UsernameInput\";\nimport PasswordInput from \"../UI/Inputs/PasswordInput\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\nconst SigninForm = () => {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n  const [isWrongPassword, setIsWrongPassword] = useState(false);\n  const [isExistUsername, setIsExistUsername] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n    const enteredUsername = usernameRef.current.value;\n    const enteredPassword = passwordRef.current.value;\n    setIsExistUsername(true);\n    setIsWrongPassword(false);\n    if (enteredUsername.trim() === \"\") {\n      setIsExistUsername(false);\n      return;\n    }\n    if (enteredPassword.trim() === \"\") {\n      setIsWrongPassword(true);\n      return;\n    }\n    console.log(enteredUsername, enteredPassword);\n    if (isExistUsername && !isWrongPassword) {\n      const res = await signInService(enteredUsername, enteredPassword);\n      console.log(\"res\", res);\n      if (res && res.success === false && res.msg === \"Username not exists\") {\n        setIsExistUsername(false);\n        setErrorMessage(res.msg);\n        toast.error(res.msg);\n        return;\n      }\n      if (res && res.success === false && res.msg === \"Password not match\") {\n        setIsWrongPassword(true);\n        setErrorMessage(res.msg);\n        toast.error(res.msg);\n        return;\n      }\n      toast.success(\"Sign in successfully\");\n      login(res.token);\n      setTimeout(() => {\n        navigate(\"/candidates\"); // the timer is used here to slow down the main thread and let the toast message to be shown\n      }, 1500);\n    }\n  };\n  return (\n    <div>\n      <h3>Sign in</h3>\n      <div>\n        <form className={classes.form}>\n          <UsernameInput usernameRef={usernameRef} />\n          {!isExistUsername && (\n            <p className={classes[\"invalid-input\"]}>{errorMessage}</p>\n          )}\n          <PasswordInput passwordRef={passwordRef} />\n          {isWrongPassword && (\n            <p className={classes[\"invalid-input\"]}>{errorMessage}</p>\n          )}\n          <button\n            type=\"submit\"\n            className={classes[\"form-btn\"]}\n            onClick={submitHandler}\n          >\n            Sign in\n          </button>\n          <Toaster />\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default SigninForm;\n"]},"metadata":{},"sourceType":"module"}